<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecci√≥n de Ingresos 5 A√±os - Tierra Fintech (Modelo B2B Marketplace)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); min-height: 100vh; color: #333; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; background: rgba(255, 255, 255, 0.95); border-radius: 15px; padding: 30px; margin-bottom: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); }
        .header h1 { color: #1e3c72; font-size: 2.5em; margin-bottom: 10px; font-weight: 700; }
        .header p { color: #666; font-size: 1.1em; margin-bottom: 20px; }
        .metadata { background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin-top: 20px; }
        .metadata-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 0.9em; }
        .card { background: rgba(255, 255, 255, 0.95); border-radius: 15px; padding: 25px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease; margin-bottom: 30px; }
        .card:hover { transform: translateY(-5px); }
        .card h2 { color: #1e3c72; font-size: 1.8em; margin-bottom: 20px; border-bottom: 3px solid #2a5298; padding-bottom: 10px; }
        .scenario-controls { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .scenario-btn { padding: 10px 20px; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: #e0e0e0; color: #666; }
        .scenario-btn.active { background: linear-gradient(135deg, #2a5298, #1e3c72); color: white; box-shadow: 0 4px 15px rgba(42, 82, 152, 0.3); }
        .scenario-btn:hover { transform: translateY(-2px); }
        .table-container { overflow-x: auto; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; font-size: 0.95em; }
        th, td { padding: 12px 15px; text-align: right; border-bottom: 1px solid #ddd; }
        th { background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; font-weight: 600; position: sticky; top: 0; z-index: 10; }
        th:first-child, td:first-child { text-align: left; font-weight: 600; }
        tr:nth-child(even) { background-color: #f8f9fa; }
        tr:hover { background-color: #e3f2fd; transition: background-color 0.3s ease; }
        .metric-row { border-left: 4px solid #2a5298; }
        .total-row { background: linear-gradient(135deg, #f0f8ff, #e3f2fd); font-weight: 700; border-top: 2px solid #2a5298; }
        .chart-container { position: relative; height: 400px; margin-top: 20px; }
        .kpis-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .kpi-card { background: linear-gradient(135deg, #f8f9fa, #ffffff); padding: 20px; border-radius: 10px; border-left: 4px solid #2a5298; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .kpi-value { font-size: 2em; font-weight: 700; color: #1e3c72; margin-bottom: 5px; }
        .kpi-label { color: #666; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px; }
        .methodology { background: rgba(255, 255, 255, 0.95); border-radius: 15px; padding: 25px; margin-top: 30px; }
        .methodology h3 { color: #1e3c72; margin-bottom: 15px; font-size: 1.5em; }
        .methodology ul { list-style-type: none; padding-left: 0; }
        .methodology li { padding: 8px 0; border-bottom: 1px solid #eee; position: relative; padding-left: 20px; }
        .methodology li:before { content: "‚Üí"; color: #2a5298; font-weight: bold; position: absolute; left: 0; }
        .data-source { font-size: 0.8em; color: #666; margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px; border-left: 3px solid #2a5298; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Proyecci√≥n de Ingresos (5 a√±os)</h1>
            <p><strong>Tierra Fintech Solutions</strong> - Modelo Financiero B2B Marketplace 2026-2030</p>
            <div class="metadata">
                <div class="metadata-grid">
                    <div><strong>C√≥digo Sesi√≥n:</strong> F7.0-S14-FINAL</div>
                    <div><strong>Modelo Financiero:</strong> B2B Marketplace de Factoring</div>
                    <div><strong>Horizonte:</strong> 60 meses (5 a√±os)</div>
                    <div><strong>Moneda Base:</strong> USD</div>
                    <div><strong>√öltima Actualizaci√≥n:</strong> Septiembre 2025</div>
                    <div><strong>Estado:</strong> Validado con Modelo Final</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üéØ Selecci√≥n de Escenario</h2>
            <div class="scenario-controls">
                <button class="scenario-btn active" onclick="changeScenario('base', this)">üìà Escenario Base</button>
                <button class="scenario-btn" onclick="changeScenario('optimista', this)">üöÄ Escenario Optimista</button>
                <button class="scenario-btn" onclick="changeScenario('pesimista', this)">‚ö†Ô∏è Escenario Pesimista</button>
            </div>
        </div>

        <div class="card">
            <h2>üí∞ Tabla de Proyecci√≥n de Ingresos Consolidada</h2>
            <div class="table-container">
                <table id="mainProjectionTable">
                    <thead>
                        <tr>
                            <th>Concepto / A√±o</th>
                            <th>2026 (A√±o 1)</th>
                            <th>2027 (A√±o 2)</th>
                            <th>2028 (A√±o 3)</th>
                            <th>2029 (A√±o 4)</th>
                            <th>2030 (A√±o 5)</th>
                            <th>Crecimiento CAGR</th>
                        </tr>
                    </thead>
                    <tbody id="projectionTableBody">
                        </tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <h2>üìä Indicadores Clave de Rendimiento (KPIs)</h2>
            <div class="kpis-grid" id="kpisGrid">
                </div>
        </div>

        <div class="card">
            <h2>üìà Evoluci√≥n de Ingresos por Fuente</h2>
            <div class="chart-container">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>

        <div class="methodology">
            <h3>üî¨ Metodolog√≠a y Supuestos del Modelo (B2B Marketplace)</h3>
            <ul>
                <li><strong>Fuentes de Ingresos:</strong> El modelo de negocio se basa en una comisi√≥n del 20% sobre la rentabilidad del inversor (1.3% mensual), una configuraci√≥n de marketplace que elimina la necesidad de capital propio para el fondeo, haciendo el modelo √°gil y resiliente (Osterwalder & Pigneur, 2010; Romero Guzm√°n, 2025, Anexo F).</li>
                <li><strong>Crecimiento de Clientes (B2B):</strong> La estrategia de adquisici√≥n se centra en las empresas procesadoras, siguiendo un plan por fases validado: 2 procesadoras en A√±o 1, 7 en A√±o 3, y una meta consolidada de 15 en A√±o 5 (Apps.co & MinTIC, n.d.; Romero Guzm√°n, 2025).</li>
                <li><strong>GMV por Procesadora:</strong> El modelo asume un Gross Merchandise Volume (GMV) promedio de $1.5M USD/mes por cada procesadora, basado en el an√°lisis de la cadena productiva l√°ctea (Romero Guzm√°n, 2025, Anexo F).</li>
                <li><strong>Modelo de Inversi√≥n:</strong> La liquidez es provista por inversores externos a trav√©s de la plataforma Interra Invierte, generando retornos atractivos con impacto social y respondiendo a la creciente demanda de inversiones de impacto (Chaparro-Africano y Ospina-Escobar, 2021).</li>
                <li><strong>Unit Economics (Procesadora):</strong> El modelo demuestra una alta sostenibilidad por cliente con un Lifetime Value (LTV) de $486k y un Costo de Adquisici√≥n de Cliente (CAC) de $10k, resultando en un ratio LTV/CAC excepcional de 48.6x (ver Anexo F, Tabla F8).</li>
                <li><strong>Contrataci√≥n por Fases:</strong> El equipo crece de 7 a 14 personas de manera escalonada para alinear la estructura de costos con la generaci√≥n de ingresos y la eficiencia del capital (ver Anexo E).</li>
                <li><strong>Macroeconom√≠a:</strong> Supuestos de crecimiento del PIB sectorial del 3.2% y tipo de cambio de 4,000 COP/USD, en un contexto donde el costo del cr√©dito formal se ha encarecido, creando una oportunidad para mecanismos alternativos (Romero Guzm√°n, 2025).</li>
                <li><strong>Estrategia de Mercado:</strong> El enfoque es un modelo B2B puro, donde la adquisici√≥n de empresas procesadoras es la puerta de entrada a su red de productores. Esta estrategia de nicho permite una penetraci√≥n de mercado efectiva frente a actores financieros tradicionales (Zentner, 2018).</li>
            </ul>
            <div class="data-source">
                <strong>üìã Fuente Principal:</strong> Los datos y supuestos de este modelo se basan en la investigaci√≥n y validaci√≥n documentada en el trabajo de grado "Validaci√≥n del Modelo de Negocio para la Creaci√≥n de Tierra Fintech" (Romero Guzm√°n, 2025), incluyendo el Modelo Financiero (Anexo F), el Plan Estrat√©gico (Anexo A) y la Validaci√≥n de Mercado (Anexo D).
            </div>
        </div>
    </div>

    <script>
        const financialData = {
            base: {
                2026: { comisionesFactoring: 266760, serviciosAdicionales: 14040, totalIngresos: 280800 },
                2027: { comisionesFactoring: 533520, serviciosAdicionales: 28080, totalIngresos: 561600 },
                2028: { comisionesFactoring: 933660, serviciosAdicionales: 49140, totalIngresos: 982800 },
                2029: { comisionesFactoring: 1333800, serviciosAdicionales: 70200, totalIngresos: 1404000 },
                2030: { comisionesFactoring: 2000700, serviciosAdicionales: 105300, totalIngresos: 2106000 }
            },
            optimista: {
                2026: { comisionesFactoring: 378000, serviciosAdicionales: 20000, totalIngresos: 398000 },
                2027: { comisionesFactoring: 882000, serviciosAdicionales: 46000, totalIngresos: 928000 },
                2028: { comisionesFactoring: 1653750, serviciosAdicionales: 86250, totalIngresos: 1740000 },
                2029: { comisionesFactoring: 2520000, serviciosAdicionales: 130000, totalIngresos: 2650000 },
                2030: { comisionesFactoring: 3937500, serviciosAdicionales: 202500, totalIngresos: 4140000 }
            },
            pesimista: {
                2026: { comisionesFactoring: 147000, serviciosAdicionales: 8000, totalIngresos: 155000 },
                2027: { comisionesFactoring: 294000, serviciosAdicionales: 16000, totalIngresos: 310000 },
                2028: { comisionesFactoring: 514500, serviciosAdicionales: 28500, totalIngresos: 543000 },
                2029: { comisionesFactoring: 735000, serviciosAdicionales: 41000, totalIngresos: 776000 },
                2030: { comisionesFactoring: 992250, serviciosAdicionales: 54750, totalIngresos: 1047000 }
            }
        };

        const kpisData = {
            base: { vpn: 145038, tir: 24.3, roiAnio5: 1.77, puntoEquilibrio: 24 }, // Punto de equilibrio actualizado a 24 meses (A√±o 2)
            optimista: { vpn: 850000, tir: 45.0, roiAnio5: 4.5, puntoEquilibrio: 18 },
            pesimista: { vpn: -250000, tir: 12.5, roiAnio5: 0.5, puntoEquilibrio: 38 }
        };

        let currentScenario = 'base';
        let revenueChart = null;

        document.addEventListener('DOMContentLoaded', function() {
            updateTable();
            updateKPIs();
            updateChart();
        });

        function changeScenario(scenario, btnElement) {
            currentScenario = scenario;
            document.querySelectorAll('.scenario-btn').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');
            updateTable();
            updateKPIs();
            updateChart();
        }

        function updateTable() {
            const tbody = document.getElementById('projectionTableBody');
            const data = financialData[currentScenario];
            const years = Object.keys(data);
            const calculateCAGR = (start, end, numYears) => (Math.pow(end / start, 1 / numYears) - 1) * 100;

            tbody.innerHTML = `
                <tr class="metric-row">
                    <td>üí≥ Comisiones por Factoring Marketplace</td>
                    ${years.map(year => `<td>$${data[year].comisionesFactoring.toLocaleString()}</td>`).join('')}
                    <td>${calculateCAGR(data[years[0]].comisionesFactoring, data[years[years.length - 1]].comisionesFactoring, years.length - 1).toFixed(1)}%</td>
                </tr>
                <tr class="metric-row">
                    <td>üîß Servicios Adicionales (Datos, etc.)</td>
                    ${years.map(year => `<td>$${data[year].serviciosAdicionales.toLocaleString()}</td>`).join('')}
                    <td>${calculateCAGR(data[years[0]].serviciosAdicionales, data[years[years.length - 1]].serviciosAdicionales, years.length - 1).toFixed(1)}%</td>
                </tr>
                <tr class="total-row">
                    <td><strong>üí∞ TOTAL INGRESOS</strong></td>
                    ${years.map(year => `<td><strong>$${data[year].totalIngresos.toLocaleString()}</strong></td>`).join('')}
                    <td><strong>${calculateCAGR(data[years[0]].totalIngresos, data[years[years.length - 1]].totalIngresos, years.length - 1).toFixed(1)}%</strong></td>
                </tr>
            `;
        }
        
        function updateKPIs() {
            const kpis = kpisData[currentScenario];
            const container = document.getElementById('kpisGrid');
            container.innerHTML = `
                <div class="kpi-card">
                    <div class="kpi-value">$${kpis.vpn.toLocaleString()}</div>
                    <div class="kpi-label">VPN (Valor Presente Neto)</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">${kpis.tir.toFixed(1)}%</div>
                    <div class="kpi-label">TIR (Tasa Interna de Retorno)</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">${kpis.roiAnio5.toFixed(2)}x</div>
                    <div class="kpi-label">ROI (Retorno de Inversi√≥n) A√±o 5</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">${kpis.puntoEquilibrio} meses</div>
                    <div class="kpi-label">Punto de Equilibrio</div>
                </div>
            `;
        }

        function updateChart() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            if (revenueChart) {
                revenueChart.destroy();
            }

            const data = financialData[currentScenario];
            const labels = Object.keys(data);

            revenueChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Comisiones por Factoring Marketplace',
                            data: labels.map(year => data[year].comisionesFactoring),
                            backgroundColor: 'rgba(30, 60, 114, 0.8)',
                            borderColor: 'rgba(30, 60, 114, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Servicios Adicionales',
                            data: labels.map(year => data[year].serviciosAdicionales),
                            backgroundColor: 'rgba(42, 82, 152, 0.6)',
                            borderColor: 'rgba(42, 82, 152, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    title: { display: true, text: `Proyecci√≥n de Ingresos - Escenario ${currentScenario.charAt(0).toUpperCase() + currentScenario.slice(1)}`, fontSize: 16 },
                    legend: { position: 'bottom' },
                    tooltips: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(tooltipItem, data) {
                                let label = data.datasets[tooltipItem.datasetIndex].label || '';
                                if (label) { label += ': '; }
                                label += '$' + tooltipItem.yLabel.toLocaleString();
                                return label;
                            }
                        }
                    },
                    scales: {
                        xAxes: [{ stacked: true, scaleLabel: { display: true, labelString: 'A√±o' } }],
                        yAxes: [{
                            stacked: true,
                            ticks: {
                                beginAtZero: true,
                                callback: function(value) { return '$' + (value / 1000) + 'K'; }
                            },
                            scaleLabel: { display: true, labelString: 'Ingresos (USD)' }
                        }]
                    }
                }
            });
        }
    </script>
</body>
</html>